<body>

	<!-- Header -->
	<header class="header-v4">
		<!-- Header desktop -->
		<div class="container-menu-desktop">
			<!-- Topbar -->
			<div class="top-bar">
				<div class="content-topbar flex-sb-m h-full container">
					<div class="left-top-bar">
						Free shipping for standard order over $100
					</div>

					<div class="right-top-bar flex-w h-full">
						<a href="/userLogin" class="flex-c-m trans-04 p-lr-25">
							{{#if user}}
							{{user.name}}
							<a href="/userProfile" class="flex-c-m trans-04 p-lr-25">
								My Account
							</a>
							<a href="/userLogout" class="flex-c-m trans-04 p-lr-25">
								LOGOUT
							</a>
							{{else}}
							LOGIN
							{{/if}}
						</a>
					</div>
				</div>
			</div>

			<div class="wrap-menu-desktop how-shadow1">
				<nav class="limiter-menu-desktop container">

					<!-- Logo desktop -->
					<a href="/" class="logo">
						<img src="../../Client/images/icons/logo-01.png" alt="IMG-LOGO">
					</a>

					<!-- Menu desktop -->
					<div class="menu-desktop">
						<ul class="main-menu">
							<li>
								<a href="/">Home</a>
								<ul class="sub-menu">
									<li><a href="/">Homepage </a></li>

								</ul>
							</li>

							<li class="active-menu">
								<a href="/products">Shop</a>
							</li>

							{{#each categories}}
							<li>
								<a href="/viewCategoryWise?id={{this._id}}">{{category}}</a>
							</li>
							{{/each}}

						</ul>
					</div>

					<!-- Icon header -->
					<div class="wrap-icon-header flex-w flex-r-m">
						<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-modal-search">
							<i class="zmdi zmdi-search"></i>
						</div>
						{{#if user}}
						<a href="/cart">
							<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-cart icon-header-noti"
								data-notify="{{cartCount}}">
								<i class="zmdi zmdi-shopping-cart"></i>
							</div>
						</a>
						<a href="/wishList"
							class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
							data-notify="{{wishlistCount}}">
							<i class="zmdi zmdi-favorite-outline"></i>
						</a>
						{{else}}
						<a href="/userLogin">
							<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-cart">
								<i class="zmdi zmdi-shopping-cart"></i>
							</div>
						</a>
						<a href="/userLogin" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 ">
							<i class="zmdi zmdi-favorite-outline"></i>
						</a>
						{{/if}}

					</div>
				</nav>
			</div>
		</div>

		<!-- Header Mobile -->
		<div class="wrap-header-mobile">
			<!-- Logo moblie -->
			<div class="logo-mobile">
				<a href="/"><img src="../../Client/images/icons/logo-01.png" alt="IMG-LOGO"></a>
			</div>

			<!-- Icon header -->
			<div class="wrap-icon-header flex-w flex-r-m m-r-15">
				<div class="icon-header-item cl2 hov-cl1 trans-04 p-r-11 js-show-modal-search">
					<i class="zmdi zmdi-search"></i>
				</div>

				{{#if user}}
				<a href="/cart">
					<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-cart icon-header-noti"
						data-notify="{{cartCount}}">
						<i class="zmdi zmdi-shopping-cart"></i>
					</div>
				</a>
				<a href="/wishList"
					class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
					data-notify="{{wishlistCount}}">
					<i class="zmdi zmdi-favorite-outline"></i>
				</a>
				{{else}}
				<a href="/userLogin">
					<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-cart">
						<i class="zmdi zmdi-shopping-cart"></i>
					</div>
				</a>
				<a href="/userLogin" class="dis-block icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 ">
					<i class="zmdi zmdi-favorite-outline"></i>
				</a>
				{{/if}}
			</div>

			<!-- Button show menu -->
			<div class="btn-show-menu-mobile hamburger hamburger--squeeze">
				<span class="hamburger-box">
					<span class="hamburger-inner"></span>
				</span>
			</div>
		</div>


		<!-- Menu Mobile -->
		<div class="menu-mobile">
			<ul class="topbar-mobile">
				<li>
					<div class="left-top-bar">
						Free shipping for standard order over $100
					</div>
				</li>

				<li>
					<div class="right-top-bar flex-w h-full">
						{{#if user}}
						{{user.name}}
						<a href="/userProfile" class="flex-c-m trans-04 p-lr-25">
							My Account
						</a>
						<a href="/userLogout" class="flex-c-m trans-04 p-lr-25">
							LOGOUT
						</a>
						{{else}}
						LOGIN
						{{/if}}
					</div>
				</li>
			</ul>

			<ul class="main-menu-m">
				<li>
					<a href="/">Home</a>
					<ul class="sub-menu-m">
						<li><a href="/">Homepage 1</a></li>

					</ul>
					<span class="arrow-main-menu-m">
						<i class="fa fa-angle-right" aria-hidden="true"></i>
					</span>
				</li>

				<li>
					<a href="/products">Shop</a>
				</li>


				{{#each categories}}
				<li>
					<a href="/viewCategoryWise?id={{this._id}}">{{category}}</a>
				</li>
				{{/each}}

			</ul>
		</div>

		<!-- Modal Search -->
		<div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
			<div class="container-search-header">
				<button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
					<img src="../../Client/images/icons/icon-close2.png" alt="CLOSE">
				</button>

				<form class="wrap-search-header flex-w p-l-15" action="/searchProducts" method="post">
					<input class="plh3" type="text" name="search" id="search-products" placeholder="Search Products">
					<button type="submit" class="flex-c-m trans-04">
						<i class="zmdi zmdi-search"></i>
					</button>

				</form>
			</div>
		</div>
	</header>



	<!-- Cart -->
	<div class="wrap-header-cart js-panel-cart">
		<div class="s-full js-hide-cart"></div>

		<div class="header-cart flex-col-l p-l-65 p-r-25">
			<div class="header-cart-title flex-w flex-sb-m p-b-8">
				<span class="mtext-103 cl2">
					Your Cart
				</span>

				<div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
					<i class="zmdi zmdi-close"></i>
				</div>
			</div>

			<div class="header-cart-content flex-w js-pscroll">
				<ul class="header-cart-wrapitem w-full">
					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="../../Client/images/item-cart-01.jpg" alt="IMG">
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
								White Shirt Pleat
							</a>

							<span class="header-cart-item-info">
								1 x $19.00
							</span>
						</div>
					</li>

					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="../../Client/images/item-cart-02.jpg" alt="IMG">
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
								Converse All Star
							</a>

							<span class="header-cart-item-info">
								1 x $39.00
							</span>
						</div>
					</li>

					<li class="header-cart-item flex-w flex-t m-b-12">
						<div class="header-cart-item-img">
							<img src="../../Client/images/item-cart-03.jpg" alt="IMG">
						</div>

						<div class="header-cart-item-txt p-t-8">
							<a href="#" class="header-cart-item-name m-b-18 hov-cl1 trans-04">
								Nixon Porter Leather
							</a>

							<span class="header-cart-item-info">
								1 x $17.00
							</span>
						</div>
					</li>
				</ul>

				<div class="w-full">
					<div class="header-cart-total w-full p-tb-40">
						Total: $75.00
					</div>

					<div class="header-cart-buttons flex-w w-full">
						<a href="/cart"
							class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-r-8 m-b-10">
							View Cart
						</a>

						<a href="" class="flex-c-m stext-101 cl0 size-107 bg3 bor2 hov-btn3 p-lr-15 trans-04 m-b-10">
							Check Out
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>



	<div class="px-5 mt-2 d-flex justify-content-end">

		<button type="submit" class=" button-24 btn-center "

		onclick="invoice1('{{products.length}}','{{orders.deliveryDetails.address}}','{{orders._id}}')"> Download
			invoice</button>
	
	

	</div>
	<div id="invoice-area" class="container-fluid py-3 " style="height: 100%;">
		<div class="table-wrapper">
			<div class="table-title">
				<div class="row">

				</div>
			</div>

			<table class="table py-5">
				<thead>
					<tr>
						<th>No</th>
						<th>Image</th>
						<th>Name</th>
						<th>Quantity</th>
						<th> Amount</th>
						<th>Status</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					{{#each products}}
					<tr>
						<td>{{inc @index}}</td>
						<td>
							<div class="how-itemcart1">
								<img src="/product-images/{{this.product.image}}" alt="IMG">
							</div>
						</td>

						<td id="pName{{@index}}">{{this.product.name}}</td>
						<td id="pQ{{@index}}">{{this.quantity}}</td>
						<td id="pPrice{{@index}}">{{this.product.price}}</td>
						<td>{{this.status}}</td>
						<td>
							{{#ifEquals this.status 'Placed'}}
							<button class="button-24"
								onclick="setOrderedProductStatus('cancel','{{this._id}}','{{this.item}}')">CANCEL</button>
							{{/ifEquals }}
							{{#ifEquals this.status 'cancel'}}
							<p>Cancelled</p>
							{{/ifEquals }}
							{{#ifEquals this.status 'Delivered'}}
							<button class="button-24"
								onclick="returnOrder('Returned','{{this._id}}','{{this.item}}','{{this.product.price}}','{{this.quantity}}')">Return
								Order</button>
							{{/ifEquals}}
							{{#ifEquals this.status 'Shipped'}}
							<p>Product Shipped</p>
							{{/ifEquals }}
		</div>
		</td>
		</tr>
		{{/each}}
		</tbody>
		</table>

	</div>

	</div>
	</div>
	<style>
		/* CSS */
		.button-24 {
			background: #FF4742;
			border: 1px solid #FF4742;
			border-radius: 6px;
			box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
			box-sizing: border-box;
			color: #FFFFFF;
			cursor: pointer;
			display: inline-block;
			font-family: nunito, roboto, proxima-nova, "proxima nova", sans-serif;
			font-size: 16px;
			font-weight: 800;
			line-height: 16px;
			min-height: 40px;
			outline: 0;
			padding: 12px 14px;
			text-align: center;
			text-rendering: geometricprecision;
			text-transform: none;
			user-select: none;
			-webkit-user-select: none;
			touch-action: manipulation;
			vertical-align: middle;
		}

		.button-24:hover,
		.button-24:active {
			background-color: initial;
			background-position: 0 0;
			color: #FF4742;
		}

		.button-24:active {
			opacity: .5;
		}
	</style>

	<script type="text/javascript">

		function setOrderedProductStatus(value, orderId, productId) {
			console.log(value);
			console.log(orderId);
			console.log(productId);
			$.ajax({
				url: '/userOrderedProductsStatus',
				method: 'post',
				data: {
					status: value,
					orderId: orderId,
					productId: productId,

				},
				success: (response) => {
					swal("Good job!", "You clicked the button!", "success");
					location.reload();
				}
			})
		}




		function returnOrder(value, orderId, productId, productPrice, productQuantity) {
			swal({
				title: "Are you sure to Retun Order?",
				text: "Once retrunws, you will not be able to recover this imaginary file!",
				icon: "warning",
				buttons: true,
				dangerMode: true,
			}).then((willDelete) => {
				if (willDelete) {
					$.ajax({
						url: '/returnProduct',
						method: 'post',
						data: {
							status: value,
							orderId: orderId,
							productId: productId,
							productPrice: productPrice,
							productQuantity: productQuantity
						},
						success: (response) => {
							swal("Good job!", "You clicked the button!", "success");
							location.reload();
						}
					})
				} else {
					swal("Your Product is safe!");
				}
			})

		},
       function invoice1(length, address, orderNo) {
			var date = new Date().toDateString().slice(3);
			var productArray = [];

			for (var i = 0; i < length; i++) {
				var productName = document.getElementById("pName" + i).innerText;
				var productPrice = document.getElementById("pPrice" + i).innerText;
				var productQuantity = document.getElementById("pQ" + i).innerText;

				var product = {
					"quantity": productQuantity,
					"description": productName,
					"tax-rate": 0,
					"price": productPrice
				};

				productArray.push(product);
			}

			var data = {
				"customize": {},
				"images": {
				},
				"sender": {
					"company": " cozaStore.",
					"address": "perumbavoor",
					"zip": "683556",
					"city": "Ernakulam",
					"country": "India"
				},
				"client": {
					"company": address,
					"address": "",
					"zip": "",
					"city": "",
					"country": ""
				},
				"information": {
					"number": orderNo,
					"date": date,
					"due-date": "NA"
				},
				"products": productArray,
				"bottom-notice": "Thank You for choosing our store",
				"settings": {
					"currency": "INR"
				},
				"translate": {}
			};

			easyinvoice.createInvoice(data, function (result) {
				easyinvoice.download("invoice.pdf",result.pdf);
			});
		},


	</script>
	 
	<script src="https://unpkg.com/easyinvoice/dist/easyinvoice.min.js"></script>

</body>